---
  apiVersion: helm.fluxcd.io/v1
  kind: HelmRelease
  metadata:
    name: elasticsearch-client
    namespace: logging
  spec:
    chart:
      repository: https://helm.elastic.co
      name: elasticsearch
      version: "7.7.1"
    values:
      clusterName: "elasticsearch"
      nodeGroup: "client"

      masterService: "elasticsearch-master"

      roles:
        master: "false"
        ingest: "false"
        data: "false"
 
      replicas: 2

      volumeClaimTemplate:
        accessModes: [ "ReadWriteOnce" ]
        # storageClassName: "standard"
        resources:
          requests:
            storage: 1Gi

      persistence:
        enabled: false

      image: "docker.elastic.co/elasticsearch/elasticsearch"
      imageTag: "7.7.1"
      imagePullPolicy: "IfNotPresent"