---
  apiVersion: helm.fluxcd.io/v1
  kind: HelmRelease
  metadata:
    name: elasticsearch-master
    namespace: logging
  spec:
    chart:
      repository: https://helm.elastic.co
      name: elasticsearch
      version: "7.7.1"
    values:
      clusterName: "elasticsearch"
      nodeGroup: "master"

      roles:
        master: "true"
        ingest: "false"
        data: "false"
 
      replicas: 3

      volumeClaimTemplate:
        accessModes: [ "ReadWriteOnce" ]
        storageClassName: "standard"
        resources:
          requests:
            storage: 4Gi

      image: "docker.elastic.co/elasticsearch/elasticsearch"
      imageTag: "7.7.1"
      imagePullPolicy: "IfNotPresent"