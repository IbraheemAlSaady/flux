---
  apiVersion: helm.fluxcd.io/v1
  kind: HelmRelease
  metadata:
    name: kibana
    namespace: logging
  spec:
    chart:
      repository: https://kubernetes-charts.storage.googleapis.com
      name: kibana
      version: "3.2.6"
    values:
      image:
        repository: "docker.elastic.co/kibana/kibana-oss"
        tag: "6.7.0"
        pullPolicy: "IfNotPresent"
      files:
        kibana.yml:
          ## Default Kibana configuration from kibana-docker.
          server.name: kibana
          server.host: "0"
          ## For kibana < 6.6, use elasticsearch.url instead
          elasticsearch.hosts: http://elasticsearch-client:9200
      service:
        type: ClusterIP
        externalPort: 5601
        internalPort: 5601
        labels:
          k8s-app: kibana-logging
          kubernetes.io/cluster-service: "true"
          addonmanager.kubernetes.io/mode: Reconcile
          kubernetes.io/name: "Kibana"
      ingress:
        enabled: false
